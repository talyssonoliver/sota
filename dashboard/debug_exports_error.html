<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Exports Error</title>
    <script>
        // Override console.error to catch exports errors
        const originalError = console.error;
        console.error = function(...args) {
            if (args.some(arg => typeof arg === 'string' && arg.includes('exports'))) {
                console.log('EXPORTS ERROR DETECTED:', ...args);
                console.trace('Stack trace for exports error:');
            }
            originalError.apply(console, args);
        };

        // Override window.onerror to catch all JavaScript errors
        window.onerror = function(message, source, lineno, colno, error) {
            console.log('JavaScript Error Details:');
            console.log('Message:', message);
            console.log('Source:', source);
            console.log('Line:', lineno);
            console.log('Column:', colno);
            console.log('Error object:', error);
            
            if (message.includes('exports')) {
                console.log('THIS IS THE EXPORTS ERROR!');
                console.log('Source file:', source);
                console.log('Line number:', lineno);
            }
            return false; // Don't suppress the error
        };

        // Listen for unhandled promise rejections
        window.addEventListener('unhandledrejection', function(event) {
            console.log('Unhandled promise rejection:', event.reason);
        });

        console.log('Error detection scripts loaded');
    </script>
</head>
<body>
    <h1>Debug Dashboard - Exports Error Detection</h1>
    <p>This page will help identify the source of the "exports is not defined" error.</p>
    <p>Check the browser console for detailed error information.</p>
    
    <!-- Load the same scripts as the main dashboard -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    <script src="enhanced_dashboard.js"></script>
    
    <script>
        console.log('All scripts loaded successfully');
        
        // Try to initialize dashboard
        try {
            const dashboard = new DashboardManager();
            console.log('DashboardManager created successfully:', dashboard);
        } catch (error) {
            console.error('Error creating DashboardManager:', error);
        }
    </script>
</body>
</html>
