<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Task Completion Dashboard - Phase 6.4</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    <script src="enhanced_dashboard_working.js"></script>
    <script src="dashboard_integration.js"></script>
    <style>        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #333;
        }
        
        /* Deprecation Banner Styles */
        .deprecation-banner {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            color: white;
            padding: 15px 20px;
            margin: -20px -20px 20px -20px;
            text-align: center;
            font-weight: 600;
            border-bottom: 3px solid #dc3545;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .deprecation-banner .message {
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .deprecation-banner .action {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .deprecation-banner a {
            color: white;
            text-decoration: underline;
            font-weight: bold;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .header .subtitle {
            margin: 10px 0 0 0;
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
            color: #333;
        }
        
        .metric-label {
            color: #666;
            font-size: 1.1em;
        }
        
        .completion-rate { color: #28a745; }
        .total-tasks { color: #007bff; }
        .qa-pass { color: #17a2b8; }
        .coverage { color: #6f42c1; }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .chart-title {
            margin: 0 0 15px 0;
            font-size: 1.3em;
            font-weight: 500;
            color: #333;
        }
        
        .chart-canvas {
            max-height: 300px;
        }
        
        .last-update {
            text-align: center;
            color: #666;
            font-size: 0.9em;
            margin-top: 20px;
        }
        
        /* System Health Styles */
        .health-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-header h2 {
            margin: 0;
            font-size: 1.5em;
            color: #333;
        }
        
        .health-timestamp {
            font-size: 0.9em;
            color: #666;
        }
        
        .health-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .health-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }
        
        .health-card.warning {
            border-left-color: #ffc107;
        }
        
        .health-card.error {
            border-left-color: #dc3545;
        }
        
        .health-title {
            margin: 0 0 10px 0;
            font-size: 1.1em;
            font-weight: 500;
            color: #333;
        }
        
        .health-value {
            font-size: 1.8em;
            font-weight: bold;
            margin: 0;
            color: #333;
        }
        
        .health-subtitle {
            margin: 5px 0 0 0;
            color: #666;
            font-size: 0.9em;
        }
        
        .component-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .component-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .component-name {
            font-weight: 500;
        }
        
        .component-status {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .component-status.healthy,
        .component-status.operational {
            background: #d4edda;
            color: #155724;
        }
        
        .component-status.warning {
            background: #fff3cd;
            color: #856404;
        }
        
        .component-status.error,
        .component-status.unavailable {
            background: #f8d7da;
            color: #721c24;
        }
        
        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .perf-item {
            text-align: center;
        }
        
        .perf-label {
            display: block;
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }
        
        .perf-value {
            font-size: 1.4em;
            font-weight: bold;
            color: #333;
        }
        
        .recommendations-list {
            margin: 0;
            padding: 0 0 0 20px;
        }
        
        .recommendations-list li {
            margin: 5px 0;
            color: #555;
        }
        
        /* Timeline Styles */
        .timeline-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .timeline-controls {
            display: flex;
            gap: 10px;
        }
        
        .timeline-btn {
            padding: 8px 16px;
            border: 2px solid #007bff;
            background: white;
            color: #007bff;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .timeline-btn:hover {
            background: #007bff;
            color: white;
        }
        
        .timeline-btn.active {
            background: #007bff;
            color: white;
        }
        
        .timeline-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .timeline-metric {
            text-align: center;
        }
        
        .timeline-label {
            display: block;
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }
        
        .timeline-value {
            font-size: 1.6em;
            font-weight: bold;
            color: #333;
        }
        
        .health-status {
            padding: 4px 12px;
            border-radius: 16px;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.9em;
        }
        
        .health-status.good {
            background: #d4edda;
            color: #155724;
        }
        
        .health-status.warning {
            background: #fff3cd;
            color: #856404;
        }
        
        .health-status.error {
            background: #f8d7da;
            color: #721c24;
        }
        
        #dashboard-status {
            position: absolute;
            top: 10px;
            right: 20px;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- DEPRECATION WARNING BANNER -->
    <div class="deprecation-banner">
        <div class="message">‚ö†Ô∏è LEGACY DASHBOARD - DEPRECATED</div>
        <div class="action">This dashboard is deprecated. Please use the <a href="/dashboard/">Unified Dashboard</a> for the latest features and data.</div>
    </div>

    <div class="header">
        <h1>Task Completion Dashboard</h1>
        <div class="subtitle">Phase 6.4 - Enhanced Auto-Update Tracking</div>
        <div id="dashboard-status"></div>
    </div>

    <div class="metrics-grid">
        <div class="metric-card">
            <div class="metric-value completion-rate" id="completionRate">--</div>
            <div class="metric-label">Completion Rate</div>
        </div>
        <div class="metric-card">
            <div class="metric-value total-tasks" id="totalTasks">--</div>
            <div class="metric-label">Total Tasks</div>
        </div>
        <div class="metric-card">
            <div class="metric-value qa-pass" id="qaPassRate">--</div>
            <div class="metric-label">QA Pass Rate</div>
        </div>
        <div class="metric-card">
            <div class="metric-value coverage" id="avgCoverage">--</div>
            <div class="metric-label">Average Coverage</div>
        </div>
    </div>

    <!-- System Health Monitoring Section -->
    <div class="health-section">
        <div class="section-header">
            <h2>üîß System Health Monitoring</h2>
            <div class="health-timestamp" id="healthLastUpdate">--</div>
        </div>
        
        <div class="health-grid">
            <div class="health-card">
                <div class="health-title">Overall Status</div>
                <div class="health-value">
                    <span class="health-status" id="overall-health-status">--</span>
                </div>
                <div class="health-subtitle">System Health</div>
            </div>
            
            <div class="health-card">
                <div class="health-title">Component Health</div>
                <div class="component-list">
                    <div class="component-item">
                        <span class="component-name">Dashboard API</span>
                        <span class="component-status" id="component-dashboard-api">--</span>
                    </div>
                    <div class="component-item">
                        <span class="component-name">Metrics Engine</span>
                        <span class="component-status" id="component-metrics-engine">--</span>
                    </div>
                    <div class="component-item">
                        <span class="component-name">Automation System</span>
                        <span class="component-status" id="component-automation-system">--</span>
                    </div>
                    <div class="component-item">
                        <span class="component-name">Reporting System</span>
                        <span class="component-status" id="component-reporting-system">--</span>
                    </div>
                </div>
            </div>
            
            <div class="health-card">
                <div class="health-title">Performance Metrics</div>
                <div class="performance-grid">
                    <div class="perf-item">
                        <span class="perf-label">CPU Usage</span>
                        <span class="perf-value" id="cpu-usage">--</span>
                    </div>
                    <div class="perf-item">
                        <span class="perf-label">Memory Usage</span>
                        <span class="perf-value" id="memory-usage">--</span>
                    </div>
                    <div class="perf-item">
                        <span class="perf-label">API Response</span>
                        <span class="perf-value" id="api-response-time">--</span>
                    </div>
                </div>
            </div>
            
            <div class="health-card">
                <div class="health-title">System Recommendations</div>
                <ul class="recommendations-list" id="system-recommendations">
                    <li>Loading recommendations...</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Interactive Timeline Section -->
    <div class="timeline-section">
        <div class="section-header">
            <h2>üìà Interactive Sprint Timeline</h2>
            <div class="timeline-controls">
                <button id="timeline-7-days" class="timeline-btn active">7 Days</button>
                <button id="timeline-14-days" class="timeline-btn">14 Days</button>
                <button id="timeline-30-days" class="timeline-btn">30 Days</button>
            </div>
        </div>
        
        <div class="timeline-summary">
            <div class="timeline-metric">
                <span class="timeline-label">Total Days</span>
                <span class="timeline-value" id="timeline-total-days">--</span>
            </div>
            <div class="timeline-metric">
                <span class="timeline-label">Active Sprints</span>
                <span class="timeline-value" id="timeline-active-sprints">--</span>
            </div>
            <div class="timeline-metric">
                <span class="timeline-label">Avg Velocity</span>
                <span class="timeline-value" id="timeline-avg-velocity">--</span>
            </div>
            <div class="timeline-metric">
                <span class="timeline-label">Completion Trend</span>
                <span class="timeline-value" id="timeline-completion-trend">--</span>
            </div>
        </div>
        
        <div class="chart-container">
            <div class="chart-title">Sprint Progress & Velocity Timeline</div>
            <canvas id="timelineChart" class="chart-canvas"></canvas>
        </div>
    </div>

    <div class="charts-grid">
        <div class="chart-container">
            <h3 class="chart-title">Task Completion Status</h3>
            <canvas id="completionChart" class="chart-canvas"></canvas>
        </div>
        
        <div class="chart-container">
            <h3 class="chart-title">Progress Trend</h3>
            <canvas id="progressChart" class="chart-canvas"></canvas>
        </div>
        
        <div class="chart-container">
            <h3 class="chart-title">QA Results</h3>
            <canvas id="qaChart" class="chart-canvas"></canvas>
        </div>
        
        <div class="chart-container">
            <h3 class="chart-title">Coverage Trend</h3>
            <canvas id="coverageChart" class="chart-canvas"></canvas>
        </div>
    </div>

    <div class="last-update" id="lastUpdate">
        Last updated: --
    </div>

    <script>
        // Global chart instances
        let completionChart, progressChart, qaChart, coverageChart, timelineChart;
        
        // Initialize dashboard when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing Enhanced Dashboard Phase 6.4...');
            
            // Initialize charts
            initializeCharts();
            
            // Load initial dashboard data
            loadDashboardData();
            
            // Initialize enhanced dashboard integration
            if (typeof initializeEnhancedDashboardIntegration === 'function') {
                initializeEnhancedDashboardIntegration();
            }
            
            // Initialize timeline controls
            if (typeof initializeTimelineControlsIntegration === 'function') {
                initializeTimelineControlsIntegration();
            }
            
            // Auto-refresh every 30 seconds
            setInterval(() => {
                loadDashboardData();
                updateTimestamp();
            }, 30000);
            
            // Initial timestamp update
            updateTimestamp();
            
            console.log('Enhanced Dashboard initialization complete!');
        });
        
        function initializeCharts() {
            // Completion Status Chart (Doughnut)
            const completionCtx = document.getElementById('completionChart').getContext('2d');
            completionChart = new Chart(completionCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Completed', 'In Progress', 'Failed', 'Not Started'],
                    datasets: [{
                        data: [0, 0, 0, 0],
                        backgroundColor: ['#28a745', '#ffc107', '#dc3545', '#6c757d'],
                        borderColor: ['#155724', '#856404', '#721c24', '#383d41'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true
                            }
                        }
                    }
                }
            });
            
            // Progress Trend Chart (Line)
            const progressCtx = document.getElementById('progressChart').getContext('2d');
            progressChart = new Chart(progressCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Tasks Completed',
                        data: [],
                        backgroundColor: 'rgba(40, 167, 69, 0.1)',
                        borderColor: '#28a745',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // QA Results Chart (Bar)
            const qaCtx = document.getElementById('qaChart').getContext('2d');
            qaChart = new Chart(qaCtx, {
                type: 'bar',
                data: {
                    labels: ['Passed', 'Failed', 'Not Run'],
                    datasets: [{
                        label: 'QA Results',
                        data: [0, 0, 0],
                        backgroundColor: ['#28a745', '#dc3545', '#6c757d'],
                        borderColor: ['#155724', '#721c24', '#383d41'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // Coverage Trend Chart (Line)
            const coverageCtx = document.getElementById('coverageChart').getContext('2d');
            coverageChart = new Chart(coverageCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Coverage %',
                        data: [],
                        backgroundColor: 'rgba(23, 162, 184, 0.1)',
                        borderColor: '#17a2b8',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // Timeline Chart (Line)
            const timelineCtx = document.getElementById('timelineChart').getContext('2d');
            timelineChart = new Chart(timelineCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Velocity',
                        data: [],
                        backgroundColor: 'rgba(0, 123, 255, 0.1)',
                        borderColor: '#007bff',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Completion %',
                        data: [],
                        backgroundColor: 'rgba(40, 167, 69, 0.1)',
                        borderColor: '#28a745',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                padding: 20,
                                usePointStyle: true
                            }
                        }
                    }
                }
            });
        }
        
        async function loadDashboardData() {
            try {
                // Try to load from API first
                const response = await fetch('http://localhost:5000/api/metrics');
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.status === 'success') {
                        updateChartsFromApiData(data.data);
                        return;
                    }
                }
                
                // Fallback to file-based data
                await loadFileBasedData();
                
            } catch (error) {
                console.warn('Failed to load dashboard data from API, trying file-based data:', error);
                await loadFileBasedData();
            }
        }
        
        async function loadFileBasedData() {
            try {
                // Try to load from charts_data.json
                const response = await fetch('./charts_data.json');
                
                if (response.ok) {
                    const chartsData = await response.json();
                    updateChartsFromData(chartsData);
                } else {
                    // Try completion metrics
                    const metricsResponse = await fetch('./completion_metrics.json');
                    if (metricsResponse.ok) {
                        const metrics = await metricsResponse.json();
                        updateChartsFromMetrics(metrics);
                    } else {
                        // Load demo data if no real data available
                        loadDemoData();
                    }
                }
                
            } catch (error) {
                console.warn('Failed to load file-based data, using demo data:', error);
                loadDemoData();
            }
        }
        
        function updateChartsFromApiData(data) {
            // Update metrics
            document.getElementById('completionRate').textContent = 
                (data.completion_rate || 0).toFixed(1) + '%';
            document.getElementById('totalTasks').textContent = data.total_tasks || 0;
            document.getElementById('qaPassRate').textContent = 
                (data.sprint_metrics?.qa_pass_rate || 0).toFixed(1) + '%';
            document.getElementById('avgCoverage').textContent = 
                (data.sprint_metrics?.average_coverage || 0).toFixed(1) + '%';
            
            // Update completion chart
            const teamMetrics = data.team_metrics || {};
            const completionData = [
                teamMetrics.completed_tasks || 0,
                teamMetrics.in_progress_tasks || 0,
                teamMetrics.failed_tasks || 0,
                Math.max(0, (teamMetrics.total_tasks || 0) - 
                         (teamMetrics.completed_tasks || 0) - 
                         (teamMetrics.in_progress_tasks || 0) - 
                         (teamMetrics.failed_tasks || 0))
            ];
            completionChart.data.datasets[0].data = completionData;
            completionChart.update('none');
            
            // Update other charts with demo data for now
            updateProgressChartWithDemo();
            updateQaChartWithDemo();
            updateCoverageChartWithDemo();
        }
        
        function updateChartsFromData(data) {
            // Update metrics
            const summary = data.completion_chart?.summary || {};
            document.getElementById('completionRate').textContent = 
                (summary.completion_rate || 0).toFixed(1) + '%';
            document.getElementById('totalTasks').textContent = summary.total_tasks || 0;
            document.getElementById('qaPassRate').textContent = 
                (summary.qa_pass_rate || 0).toFixed(1) + '%';
            document.getElementById('avgCoverage').textContent = 
                (summary.average_coverage || 0).toFixed(1) + '%';
            
            // Update charts
            if (data.completion_chart?.data?.datasets?.[0]?.data) {
                completionChart.data.datasets[0].data = data.completion_chart.data.datasets[0].data;
                completionChart.update('none');
            }
        }
        
        function updateChartsFromMetrics(metrics) {
            // Update metrics display
            const teamMetrics = metrics.team_metrics || {};
            document.getElementById('completionRate').textContent = 
                (teamMetrics.completion_rate || 0).toFixed(1) + '%';
            document.getElementById('totalTasks').textContent = teamMetrics.total_tasks || 0;
            document.getElementById('qaPassRate').textContent = 
                (teamMetrics.qa_pass_rate || 0).toFixed(1) + '%';
            document.getElementById('avgCoverage').textContent = 
                (teamMetrics.average_coverage || 0).toFixed(1) + '%';
        }
        
        function loadDemoData() {
            console.log('Loading demo dashboard data');
            
            // Demo metrics
            document.getElementById('completionRate').textContent = '72.0%';
            document.getElementById('totalTasks').textContent = '25';
            document.getElementById('qaPassRate').textContent = '95.0%';
            document.getElementById('avgCoverage').textContent = '88.5%';
            
            // Demo completion chart
            const demoCompletionData = [18, 4, 1, 2];
            completionChart.data.datasets[0].data = demoCompletionData;
            completionChart.update('none');
            
            updateProgressChartWithDemo();
            updateQaChartWithDemo();
            updateCoverageChartWithDemo();
        }
        
        function updateProgressChartWithDemo() {
            const demoProgressLabels = [];
            const demoProgressData = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                demoProgressLabels.push(date.toLocaleDateString());
                demoProgressData.push(Math.floor(Math.random() * 5) + (18 - i));
            }
            progressChart.data.labels = demoProgressLabels;
            progressChart.data.datasets[0].data = demoProgressData;
            progressChart.update('none');
        }
        
        function updateQaChartWithDemo() {
            const demoQaData = [23, 1, 1];
            qaChart.data.datasets[0].data = demoQaData;
            qaChart.update('none');
        }
        
        function updateCoverageChartWithDemo() {
            const demoCoverageLabels = [];
            const demoCoverageData = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                demoCoverageLabels.push(date.toLocaleDateString());
                demoCoverageData.push(Math.floor(Math.random() * 10) + 85);
            }
            coverageChart.data.labels = demoCoverageLabels;
            coverageChart.data.datasets[0].data = demoCoverageData;
            coverageChart.update('none');
        }
        
        function updateTimestamp() {
            const now = new Date();
            const timestamp = 'Last updated: ' + now.toLocaleTimeString();
            document.getElementById('lastUpdate').textContent = timestamp;
            
            const healthTimestamp = document.getElementById('healthLastUpdate');
            if (healthTimestamp) {
                healthTimestamp.textContent = timestamp;
            }
        }
    </script>
</body>
</html>
